{"version":3,"sources":["commons/authentication/auth-token.service.js","commons/api/api.service.js","commons/authentication/authentication.api.js","commons/authentication/authentication.service.js","modules/login/login.page.js","routes.js","modules/signup/signup.page.js","modules/dashboard/dashboard.page.js","App.js","index.js"],"names":["AuthTokenService","Cookies","get","ApiService","this","config","axios","url","method","then","result","getAuthToken","token","call","headers","AuthTokenServiceModule","AuthApi","data","ApiServiceModule","AUTH_TOKEN","ClientStore","clientCache","AuthService","store","window","location","hostname","split","slice","join","domain","getDomain","remove","reset","login","set","expires","signUp","AuthApiModule","LoginPage","props","history","replace","APP_STATES","DASHBOARD","path","catch","err","console","log","className","onSubmit","onLogin","render","handleSubmit","autoComplete","name","input","type","placeholder","label","Component","HOME","exact","component","LOGIN","SIGNUP","signup","bind","setState","isLoading","errors","value","App","Fragment","Object","values","map","route","i","React","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.b4484596.chunk.js","sourcesContent":["import Cookies from 'js-cookie';\nconst AUTH_TOKEN = 'authToken';\n\nclass AuthTokenClass {\n  getAuthToken() {\n    return Cookies.get(AUTH_TOKEN)\n  }\n}\n\nexport const AuthTokenService = new AuthTokenClass();\n","import axios from 'axios';\nimport { AuthTokenService as AuthTokenServiceModule} from '../authentication/auth-token.service';\n\nconst BASE_URL = '/api/v1';\n\nclass ApiServiceClass {\n  constructor(AuthTokenService) {\n    this.AuthTokenService = AuthTokenService;\n  }\n\n  call(config){\n    return axios({ ...config, url: `${BASE_URL}${config.url}`, method: config.method || 'GET' }).then((result = {}) => result)\n  }\n\n  callAuth(config) {\n    return this.AuthTokenService.getAuthToken()\n      .then((token) => this.call({\n        ...config,\n        headers: { ...config.headers, token }\n      }));\n  }\n};\n\nexport const ApiService = new ApiServiceClass(AuthTokenServiceModule);\n","import { ApiService as ApiServiceModule } from '../api/api.service';\n\nclass AuthApiClass {\n  constructor(ApiService) {\n    this.ApiService = ApiService;\n  }\n\n  login(data) {\n    return this.ApiService.call({\n      method: 'POST',\n      url: '/user/login',\n      data,\n    });\n  }\n\n  signUp(data) {\n    return this.ApiService.call({\n      method: 'POST',\n      url: '/user/signup',\n      data,\n    });\n  }\n}\n\nexport const AuthApi = new AuthApiClass(ApiServiceModule);\n","import Cookies from 'js-cookie';\nimport { AuthApi as AuthApiModule } from './authentication.api';\n\nconst AUTH_TOKEN = 'authToken';\n\nclass ClientStore {\n  constructor() {\n    this.clientCache = {};\n  }\n\n  get() {\n    return this.clientCache;\n  }\n\n  set(data = {}) {\n    this.clientCache = { ...this.clientCache, ...data };\n  }\n\n  reset() {\n    this.clientCache = {};\n  }\n}\n\n\nclass AuthServiceClass {\n  constructor(AuthApi) {\n    this.AuthApi = AuthApi;\n    this.store = new ClientStore();\n  }\n\n  getDomain(){\n    window.location.hostname.split('.').slice(-2).join('.');\n  }\n\n  logout() {\n    const domain = this.getDomain();\n    Cookies.remove(AUTH_TOKEN, { domain });\n    this.store.reset();\n  }\n\n  login(data) {\n    return this.AuthApi.login(data)\n      .then(({ data: { token } } = {}) => {\n        Cookies.set(AUTH_TOKEN, token, {\n          expires: 30,\n          domain: this.getDomain(),\n        });\n      });\n  }\n\n  signUp(data) {\n    return this.AuthApi.signUp(data)\n      .then(() => this.login(data));\n  }\n\n  isAuthenticated() {\n    return !!Cookies.get(AUTH_TOKEN)\n  }\n}\n\nexport const AuthService = new AuthServiceClass(AuthApiModule);\n","import React, { Component } from 'react';\nimport { Form, Field } from 'react-final-form';\nimport { AuthService } from '../../commons/authentication/authentication.service';\nimport { APP_STATES } from '../../routes';\n\nexport class LoginPage extends Component {\n  constructor(props) {\n    super(props);\n  }\n  \n  onLogin(data) {\n    return AuthService.login(data)\n      .then(() => this.props.history.replace(APP_STATES.DASHBOARD.path))\n      .catch((err) => console.log('err'));\n  }\n\n  render() {\n    return (\n      <div className=\"login\">\n        <Form \n        onSubmit={this.onLogin}\n        render={({\n          handleSubmit,\n        }) => (\n        <form onSubmit={handleSubmit} autoComplete=\"off\">\n          <Field name=\"email\">\n            {({ input }) => (\n              <input\n                {...input}\n                type=\"email\"\n                placeholder=\"Email\"\n                name=\"email\"\n              />\n            )}\n          </Field>\n          <Field name=\"password\">\n            {({ input }) => (\n              <input\n                {...input}\n                type=\"password\"\n                placeholder=\"Mot de passe\"\n                name=\"password\"\n              />\n            )}\n          </Field>\n          <input type=\"submit\" label=\"Se connecter\"/>\n      </form>\n      )} />\n      </div>\n    )\n  }\n}","import { Dashboard } from './modules/dashboard/dashboard.page';\n// import { Team } from './modules/team/Team';\n// import { Decks } from './modules/decks/Decks';\n// import { DECK_ROUTES } from './modules/decks/route';\n// import { MainTemplate } from './modules/decks/main-template';\nimport { LoginPage } from './modules/login/login.page';\nimport { SignUpPage } from './modules/signup/signup.page';\n\nconst EntryRedirection = ({ history }) => {\n  history.replace(APP_STATES.LOGIN.path);\n  return null;\n};\n\nconst APP_STATES = {\n  HOME: {\n    path: '/',\n    exact: true,\n    component: EntryRedirection\n  },\n  LOGIN: {\n    path: '/login',\n    component: LoginPage,\n  },\n  SIGNUP: {\n    path: '/signup',\n    component: SignUpPage,\n  },\n  DASHBOARD: {\n    path: '/dashboard',\n    component: Dashboard,\n  },\n  // DECKS: {\n  //   path: '/decks',\n  //   component: MainTemplate\n  // },\n  // TEAM: {\n  //   path: '/team',\n  //   component: Team,\n  // }\n}\n\nexport { APP_STATES };","import React, { Component } from 'react';\nimport { Form, Field } from 'react-final-form';\nimport { AuthService } from '../../commons/authentication/authentication.service';\nimport { APP_STATES } from '../../routes';\n\nexport class SignUpPage extends Component {\n  constructor(props) {\n    super(props);\n    this.signup = this.signup.bind(this);\n  }\n  \n  signup(data) {\n    this.setState({\n      isLoading: true,\n    });\n    return AuthService.signUp(data)\n      .then(() => this.props.history.replace(APP_STATES.DASHBOARD.path))\n      .catch(({ errors = [] } = {}) => {\n        this.setState({\n          errors,\n          isLoading: false,\n        });\n      });\n  }\n\n  render() {\n    return (\n      <div className=\"signup\">\n        <Form \n          onSubmit={this.signup}\n          render={({\n            handleSubmit,\n          }) => (\n          <form onSubmit={handleSubmit} autoComplete=\"off\">\n            <Field name=\"email\">\n              {({ input }) => (\n                <input\n                  {...input}\n                  type=\"email\"\n                  placeholder=\"Email\"\n                  name=\"email\"\n                />\n              )}\n            </Field>\n            <Field name=\"username\">\n              {({ input }) => (\n                <input\n                  {...input}\n                  type=\"text\"\n                  placeholder=\"Username\"\n                  name=\"username\"\n                />\n              )}\n            </Field>\n            <Field name=\"password\">\n              {({ input }) => (\n                <input\n                  {...input}\n                  type=\"password\"\n                  placeholder=\"Mot de passe\"\n                  name=\"password\"\n                />\n              )}\n            </Field>\n            <input type=\"submit\" value=\"Créer mon compte\" />\n          </form>\n        )}\n      />\n      </div>\n    )\n  }\n}","export const Dashboard = () => (\n  <div>Dashboard</div>\n)","import React from 'react';\nimport { Route } from 'react-router-dom';\nimport { APP_STATES } from './routes';\n// import { Sidebar } from './modules/sidebar/Sidebar';\nimport './app.scss';\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <div className=\"app__menu-toggle\"></div>\n        {/* <Sidebar /> */}\n        <div className=\"app\">\n          <div className=\"layout-container\">\n            {Object.values(APP_STATES).map((route, i) =>\n              <Route \n                key={i}\n                path={route.path} \n                exact={route.exact}\n                render={props =>\n                  <route.component {...props}/>\n                }\n              />\n            )}\n          </div>\n        </div>\n      </React.Fragment>\n    )\n  }\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter, withRouter } from 'react-router-dom';\n\nimport App from './App';\n\nconst initApp = () => {\n  return ReactDOM.render(\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>,\n    document.getElementById(\"root\")\n  );\n}\n\ninitApp();\n"],"sourceRoot":""}